spring:
  application:
    name: vop-demo-service

  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.yml

  jpa:
    hibernate:
      ddl-auto: none
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
  jackson:
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false

management:
  endpoints:
    web:
      exposure:
        include: "health,info,metrics,env,loggers"

# --- Security (defaults; override per env) ---
vop:
  security:
    api-key:
      enabled: false
      header: X-API-Key
      value: ${VOP_API_KEY:dev-key}   # for local quick tests
  identity:
    http-enabled: false              # enable in non-local to enrich via HTTP
  data:
    redis:
      embedded:
        enabled: true                # local-only embedded Redis (from starter)
        port: 6379

# --- Resource server (JWT) â€“ Example Okta wiring (disabled by default) ---
#spring:
#  security:
#    oauth2:
#      resourceserver:
#        jwt:
#          issuer-uri: https://your-okta-domain/oauth2/default
#          audience: your-audience

# Logging hints (vop-logging-config supplies logback + masking)
logging:
  level:
    root: INFO
    com.tnl.vop: INFO
#spring:
#  datasource:
#    url: jdbc:oracle:thin:@//host:1521/ORCLCDB
#    driver-class-name: oracle.jdbc.OracleDriver
#    username: APP_USER
#    password: ${DB_PASSWORD}
#  jpa:
#    database-platform: org.hibernate.dialect.OracleDialect
#spring:
#  datasource:
#    url: jdbc:mysql://host:3306/vop_demo?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC
#    driver-class-name: com.mysql.cj.jdbc.Driver
#    username: app
#    password: ${DB_PASSWORD}
#  jpa:
#    database-platform: org.hibernate.dialect.MySQL8Dialect
#spring:
#  datasource:
#    url: jdbc:postgresql://host:5432/vop_demo
#    driver-class-name: org.postgresql.Driver
#    username: app
#    password: ${DB_PASSWORD}
#  jpa:
#    database-platform: org.hibernate.dialect.PostgreSQLDialect
